<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Authentication</title>
    <script type="module">
        // ✅ Firebase modulini import qilish
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // ✅ Firebase konfiguratsiyasi
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyA9135jgoerMVa_MQ0JkPid364aPIaAr9E",
  authDomain: "chat-ff9c7.firebaseapp.com",
  databaseURL: "https://chat-ff9c7-default-rtdb.firebaseio.com",
  projectId: "chat-ff9c7",
  storageBucket: "chat-ff9c7.firebasestorage.app",
  messagingSenderId: "261792238950",
  appId: "1:261792238950:web:d9302bbeb00272b66fcca7",
  measurementId: "G-YYGJVYMEMR"
};

        // ✅ Firebase'ni ishga tushirish
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // ✅ Ro‘yxatdan o‘tish funksiyasi
        window.register = async function() {
            const email = document.getElementById("signup-email").value;
            const password = document.getElementById("signup-password").value;

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                alert("Ro‘yxatdan muvaffaqiyatli o‘tdingiz!");
                console.log("Foydalanuvchi:", userCredential.user);
                window.location.href = "https://js2-ramazons-projects-915f6019.vercel.app";
            } catch (error) {
                alert("Xatolik: " + error.message);
            }
        }

        // // ✅ Kirish funksiyasi
        // window.login = async function() {
        //     const email = document.getElementById("login-email").value;
        //     const password = document.getElementById("login-password").value;

        //     try {
        //         const userCredential = await signInWithEmailAndPassword(auth, email, password);
        //         alert("Tizimga muvaffaqiyatli kirdingiz!");
        //         console.log("Foydalanuvchi:", userCredential.user);
        //         window.location.href = "https://js2-ramazons-projects-915f6019.vercel.app";
        //     } catch (error) {
        //         alert("Xatolik: " + error.message);
        //     }
        // }

        // ✅ Chiqish funksiyasi
        window.logout = async function() {
            try {
                await signOut(auth);
                alert("Tizimdan chiqdingiz!");
            } catch (error) {
                alert("Xatolik: " + error.message);
            }
        }
    </script>
</head>
<body>
    <h2>Ro‘yxatdan o‘tish</h2>
    <input type="email" id="signup-email" placeholder="Email">
    <input type="password" id="signup-password" placeholder="Parol">
    <button onclick="register()">Ro‘yxatdan o‘tish</button>
    <br><br>
    
    <!-- <h2>Tizimga kirish</h2>
    <input type="email" id="login-email" placeholder="Email">
    <input type="password" id="login-password" placeholder="Parol">
    <button onclick="login()">Kirish</button>
    <br><br> -->

    <button onclick="logout()">Chiqish</button>
</body>
</html>